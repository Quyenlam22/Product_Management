extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/product-layout.pug

block main
    .container.my-3 
        .row 
            .col-12 
                +box-head(pageTitle)

        .row 
            .col-12
                table(
                    class="table table-bordered"
                )
                    thead 
                        tr 
                            th STT 
                            th Hình ảnh
                            th Tên
                            th Giá
                            th Số lượng
                            th Tổng tiền
                            th Hành động

                    tbody
                        if(cartDetail.products.length > 0)
                            each item, index in cartDetail.products
                                tr
                                    td #{index+1}
                                    td
                                        img(src=item.productInfo.thumbnail alt=item.productInfo.title width="80px")
                                    td
                                        a(href=`products/detail/${item.product_id}`) #{item.productInfo.title}
                                    td #{item.productInfo.priceNew}$
                                    td 
                                        input(
                                            type="number"
                                            name="quantity"
                                            value=item.quantity
                                            min="1"
                                            item-id=item.product_id
                                            style="width: 60px"
                                        )
                                    td #{item.totalPrice}$
                                    td
                                        a(
                                            href=`/cart/delete/${item.product_id}`
                                            class="btn btn-danger"
                                        ) Xóa
                        else 
                            p Chưa có sản phẩm nào trong giỏ hàng
                
                h3(class="text-end") Tổng đơn hàng: #{cartDetail.totalPrice}$

                div(class="text-end mt-3") 
                    a(href="/checkout" class="btn btn-success") THANH TOÁN


                //- each item, index in products
                //-     tr
                //-         td 
                //-             input(
                //-                 type="checkbox"
                //-                 name="id"
                //-                 value=item.id
                //-             )
                //-         td #{(pagination.currentPage - 1) * pagination.limitItems + (index + 1)}
                //-         td
                //-             img(
                //-                 src=item.thumbnail
                //-                 alt=item.title
                //-                 width="80px"
                //-                 height="auto"
                //-                 )
                //-         td #{item.title}
                //-         td #{item.price}$
                //-         td
                //-             input(
                //-                 type="number"
                //-                 value = item.position
                //-                 style="width: 60px"
                //-                 min="1"
                //-                 name="position"
                //-             )
                //-         td
                //-             if(role.permissions.includes("products_edit"))
                //-                 if(item.status == "active")
                //-                     a(
                //-                         href="javascript:;" 
                //-                         data-status=item.status
                //-                         data-id=item.id
                //-                         button-change-status
                //-                         class="badge badge-success"
                //-                     ) Hoạt động 
                //-                 else
                //-                     a(
                //-                         href="#javascript:" 
                //-                         data-status=item.status
                //-                         data-id=item.id
                //-                         button-change-status
                //-                         class="badge badge-danger"
                //-                     ) Dừng hoạt động 
                //-         td 
                //-             p #{item.accountFullName}
                //-             p   
                //-                 +formatDate(item.createdBy.createdAt)
                //-         td 
                //-             a(
                //-                 href=`${prefixAdmin}/products/detail/${item.id}`
                //-                 class="btn btn-secondary btn-sm"
                //-                 style="margin-right: 3px"
                //-             ) Chi tiết
                //-             if(role.permissions.includes("products_edit"))
                //-                 a(
                //-                     href=`${prefixAdmin}/products/edit/${item.id}`
                //-                     class="btn btn-warning btn-sm"
                //-                 ) Sửa 
                //-             if(role.permissions.includes("products_delete"))
                //-                 button(
                //-                     class="btn btn-danger btn-sm ml-1"
                //-                     button-deleted
                //-                     data-id=item.id
                //-                     ) Xóa
